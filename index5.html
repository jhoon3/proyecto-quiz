<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preguntas Informatica</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        @font-face {
        font-family:'Departure Mono' ;
        src: url('./fuentes/DepartureMono-Regular.otf');
        }
        html, 
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Departure Mono';
            text-align: center;
            overflow: hidden;
            color: bisque;
    }


    /* Contenido del juego encima del VANTA */
    h1 {
        
        color: bisque;
        padding: 15px;
        z-index: 10;
        position: relative;
    }

    .contenedor {
        position: relative;
        z-index: 10;
        margin-top: 30px;
    }

    #avatar{
        width: 150px;
        margin-bottom: 20px;
        transition: all 0.3s ease;
    }

    #question-text {
        color: bisque;
        font-weight: bold;
        font-size: 20px;
        margin-bottom: 15px;
        text-shadow: 1px 1px 2px black;
    }

    .opcion {
        display: block;
        margin: 8px auto;
        padding: 10px;
        width: 200px;
        border: 1px solid #333;
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.9);
        cursor: pointer;
        transition: transform 0.2s;
    }

    .opcion:hover {
        transform: scale(1.05);
    }

    .opcion.correcta {
        background-color: lightgreen;
    }

    .opcion.incorrecta {
        background-color: lightcoral;
    }

    #next-btn, #restart-btn {
        margin-top: 20px;
        padding: 10px 20px;
        border: none;
        background-color: #333;
        color: white;
        border-radius: 5px;
        cursor: pointer;
    }
    #vanta-bg{
        position: fixed; /* se mantiene fijo al fondo */
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh; /* ocupa todo el alto de la pantalla */
        z-index: -1; /* se va detrás del contenido */
    }
    </style>
</head>
<body>
    <div id="vanta-bg"></div>

    <h1>INFORMATICA</h1>

    <div class="bloque">
            <h3 id="mostrarNombre"></h3>
    </div>
    <div class="contenedor">
        <img
            id="avatar"
            alt="Avatar del jugador"
            width="200px"
        />
        <div id="quiz-container">
            <p id="question-text">¿Qué es la informática?</p>
        <div id="options">
            
            <button class="opcion" disable>El estudio de los animales</button>
            <button class="opcion correcta" disable>La ciencia que estudia el uso y manejo de la información mediante computadoras</button>
            <button class="opcion" disable>Un programa de dibujo</button>
            <button class="opcion" disable>Un tipo de red social</button>
        </div>
        <button id="next-btn" style="display: inline-block;">Siguiente</button>
        </div>
        <div id="result-container" style="display: none;">
            <h3 id="result-text"></h3>
            <button id="restart-btn">Jugar de Nuevo</button>    
        </div>
    </div>
    <script>
        // 1. Obtener datos de la página anterior
        const nombre = localStorage.getItem("nombreJugador") || "Vikingo";
        const genero = localStorage.getItem("generoJugador") || "masculino";
        document.getElementById("mostrarNombre").textContent = nombre;
        
        //2. Banco de preguntas
        const questions = [
    {
        question: "¿Qué es la informática?",
        options: ["El estudio de los animales", "La ciencia que estudia el uso y manejo de la información mediante computadoras ", "Un programa de dibujo", "Un tipo de red social"],
        answer: "La ciencia que estudia el uso y manejo de la información mediante computadoras "
    },
    {
        question: "¿Qué es un software?",
        options: ["Las partes que se pueden tocar de una computadora",
                "Los programas y aplicaciones que usamos en la computadora ",
                "Un tipo de cable",
                "Un componente de red"],
        answer: "Los programas y aplicaciones que usamos en la computadora "
    },
    {
        question: "Es conocido como el “padre de la computación",
        options: [ "Donald Knuth",
                "Charles Babbage ",
                "Linus Torvalds",
                "Berners Lee"],
        answer: "Charles Babbage "
    },
    ];
    // 3. Variables de estado
    let currentQuestion = 0;
    let score = 0;

    // Referencias al DOM
    const questionText = document.getElementById("question-text");
    const optionsContainer = document.getElementById("options");
    const nextBtn = document.getElementById("next-btn");
    const resultContainer = document.getElementById("result-container");
    const quizContainer = document.getElementById("quiz-container");
    const resultText = document.getElementById("result-text");
    const restartBtn = document.getElementById("restart-btn");
    const avatar = document.getElementById("avatar");

    // 4. Configuración de rutas según género
    const imgPath = {
        neutral: genero === "femenino" ? "./imagen/vikinga.png" : "./imagen/vikingo.png",
        feliz:   genero === "femenino" ? "./imagen/vikingafeliz.png" : "./imagen/vikingofeliz.png",
        enojado: genero === "femenino" ? "./imagen/vikingaenojada.png" : "./imagen/vikingoenojado.png"
    };

    // 5. FUNCIÓN PARA MEZCLAR PREGUNTAS
    function mezclarPreguntas(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    // Mostrar pregunta
    function showQuestion() {
        const q = questions[currentQuestion];
        questionText.textContent = q.question;
        optionsContainer.innerHTML = "";
        nextBtn.style.display = "none";
        avatar.src = imgPath.neutral; // Vuelve a imagen normal

        q.options.forEach(option => {
            const btn = document.createElement("button");
            btn.classList.add("opcion");
            btn.textContent = option;
            btn.onclick = () => selectAnswer(btn, q.answer);
            optionsContainer.appendChild(btn);
        });
    }

    // Selección de respuesta
    function selectAnswer(selectedBtn, correctAnswer) {
        const allOptions = optionsContainer.querySelectorAll(".opcion");

        allOptions.forEach(btn => {
            btn.disabled = true;
            if (btn.textContent === correctAnswer) btn.classList.add("correcta");
            else if (btn === selectedBtn) btn.classList.add("incorrecta");
        });

        // Lógica de cambio de imagen corregida
        if (selectedBtn.textContent === correctAnswer) {
            score++;
            avatar.src = imgPath.feliz;
        } else {
            avatar.src = imgPath.enojado;
        }

        nextBtn.style.display = "inline-block";
    }

    nextBtn.onclick = () => {
        currentQuestion++;
        if (currentQuestion < questions.length) showQuestion();
        else showResult();
    };

    function showResult() {
        quizContainer.style.display = "none";
        resultContainer.style.display = "block";
        resultText.textContent = `Tu puntuación: ${score} de ${questions.length}`;
        avatar.src = imgPath.neutral;
    }

    restartBtn.onclick = () => {
        currentQuestion = 0;
        score = 0;       
        mezclarPreguntas(questions); // Mezcla para la nueva ronda
        resultContainer.style.display = "none";  
        quizContainer.style.display = "block";
        showQuestion();
    };
    // Inicializar juego por primera vez
    mezclarPreguntas(questions); 
    showQuestion();
    </script>
        
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.dots.min.js"></script>
    <script>
        VANTA.DOTS({
        el: "#vanta-bg",
        mouseControls: true,
        touchControls: true,
        gyroControls: false,
        minHeight: 200.00,
        minWidth: 200.00,
        scale: 1.00,
        scaleMobile: 1.00,
        size: 10.00,
        showLines: false
        })
    </script>
</body>
</html>


    
